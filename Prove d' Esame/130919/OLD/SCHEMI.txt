
CREATE TABLE E1(

	K1 INT NOT NULL PRIMARY KEY,
	A INT NOT NULL,
	
	CODR1 INT NOT NULL REFERENCES E3,-->RESTRIZIONE A E4! TRIGGER!
	
	TIPO12 SMALLINT NOT NULL CHECK(TIPO12 IN(1, 2)),

	C INT,
	
	CONSTRAINT E2
		CHECK((TIPO12 = 1 AND C IS NULL) OR
			  (TIPO12 = 2 AND C IS NOT NULL)))

);

CREATE TABLE E3(

	COD INT NOT NULL PRIMARY KEY,

	K3 INT,
	--UNIQUE(K3),
	D INT NOT NULL,
	
	--C INT,
	K1R2 INT REFERENCES E1, -->RESTRIZIONE A E2! TRIGGER!
	--UNIQUE(K1R2),
			  
	TIPO34 SMALLINT NOT NULL CHECK(TIPO34 IN(3, 4)),
	
	E INT,
	
	CONSTRAINT E4
		CHECK((TIPO34 = 3 AND E IS NULL) OR
			  (TIPO34 = 4 AND E IS NOT NULL))

);



