
CREATE TABLE E1(

	K1 INT NOT NULL PRIMARY KEY,
	A INT NOT NULL,
	
	K3R1 INT REFERENCES E3, --TRIGGER PER FARGLI RIFERENZIARE INVECE E4!
	
	TIPO12 SMALLINT NOT NULL CHECK TIPO12 IN(1, 2), --2 ISTANZA ANCHE DI E2!
	C INT, --NO SINCRONIZZAZIONI PERCHE' UN SOLO ATTRIBUTO!
	
	CONSTRAINT E2
		CHECK((TIPO12 = 1 AND C IS NULL) OR
	   	      (TIPO12 = 2 AND C IS NOT NULL))
								   
);

CREATE TABLE E3(
	
	K3 INT NOT NULL PRIMARY KEY,
	D INT NOT NULL,
	
	K1R2 INT REFERENCES E1, --TRIGGER PER FARGLI REFERENZIARE E2!
	--E' ANCHE UNIQUE PERCHE' SE PARTECIPA LO FA MAX UNA VOLTA!
	
	TIPO34 SMALLINT NOT NULL CHECK(TIPO34 IN(3, 4)),
	E INT,
	
	CONSTRAINT E4
		CHECK((TIPO34 = 3 AND E IS NULL) OR
			  (TIPO34 = 4 AND E IS NOT NULL))

);