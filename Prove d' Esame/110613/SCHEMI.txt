--PRIORITA' A 1-1

-- CREATE TABLE E2(

	-- C INT NOT NULL,
	-- K3R2 INT NOT NULL REFERENCES E3,
	

-- );

CREATE TABLE E1(

	K1 INT NOT NULL PRIMARY KEY,
	A INT NOT NULL,
	B INT NOT NULL,
	
	TIPO SMALLINT NOT NULL CHECK(TIPO IN(1, 2)),
	C INT,
	K3R2 INT, --GARANTIRE LA FKEY CON UN TRIGGER!
	
	CONSTRAINT E2
		CHECK((TIPO = 1 AND C IS NULL) OR
			   (TIPO = 2 AND C IS NOT NULL))
	
);

CREATE TABLE E3(

	K3 INT NOT NULL PRIMARY KEY,
	D INT NOT NULL,
	K1R1 INT NOT NULL REFERENCES E1

);

-- DROP TABLE E1;
-- DROP TABLE E3;












