

CREATE TRIGGER PUNTODI
NO CASCADE BEFORE INSERT ON E3
REFERENCING NEW AS N
FOR EACH ROW
WHEN (EXISTS(SELECT *
			 FROM E1
			 WHERE N.K1R1 = E1.K1
			 AND E1.A > 10))
SIGNAL SQLSTATE '70001' ('K1R1 REFERENZIA K1 CON A < 10!');

CREATE TRIGGER PUNTODU
NO CASCADE BEFORE UPDATE ON E3
REFERENCING NEW AS N
FOR EACH ROW
WHEN (EXISTS(SELECT *
			 FROM E1
			 WHERE N.K1R1 = E1.K1
			 AND E1.A > 10))
SIGNAL SQLSTATE '70001' ('K1R1 REFERENZIA K1 CON A < 10!');

CREATE TRIGGER UPDATEE1
NO CASCADE BEFORE UPDATE ON E1
REFERENCING NEW AS N
FOR EACH ROW
WHEN(N.A > 10 AND EXISTS(SELECT *
						 FROM E3
						 WHERE E3.K1R1 = N.K1))
SIGNAL SQLSTATE '70001' ('LA TUPLA INSERITA HA UN A > 10 CHE REFERENZIA UNA TUPLA DI E1');
	
CREATE TRIGGER NOME
NO CASCADE BEFORE INSERT ON E1
REFERENCING NEW AS N
FOR EACH ROW
WHEN (NOT EXISTS(SELECT *
			     FROM E1
				 WHERE N.A = E1.A
				 AND N.B = E1.B))
SIGNAL SQLSTATE ('')


