
CREATE TABLE E3(

	K3 INT NOT NULL PRIMARY KEY,
	D INT NOT NULL

);

CREATE TABLE E1(

	K1 INT NOT NULL PRIMARY KEY,
	A INT NOT NULL,
	B INT NOT NULL,
	K3R1 INT REFERENCES E3,
	
	TIPO12 SMALLINT NOT NULL CHECK(TIPO12 IN (1, 2)),
	C INT,
	K3R2 INT REFERENCES E3,
	
	CONSTRAINT PUNTO_C
		CHECK(K3R1 <> K3R2), -- OPZIONALE LA CONDIZIONE SUL TIPO XK (K3R2 = NULL) <>  K3R2
	
	CONSTRAINT PUNTO_D
		CHECK(A >= B * 2),
	
	CONSTRAINT E2
		CHECK((TIPO12 = 1 AND C IS NULL AND K3R2 IS NULL) OR
			  (TIPO12 = 2 AND C IS NOT NULL AND K3R2 IS NOT NULL))

);
