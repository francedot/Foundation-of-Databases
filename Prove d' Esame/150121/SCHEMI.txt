DROP TABLE E2;
DROP TABLE E1;

CREATE TABLE E2(

	K2 INT NOT NULL PRIMARY KEY,
	C INT NOT NULL,
	D INT,
	K2Y INT REFERENCES E2,
	
	CONSTRAINT R2
		CHECK((D IS NOT NULL AND K2Y IS NOT NULL) OR
			  (D IS NULL AND K2Y IS NULL))

);

CREATE TABLE E1(

	K1 INT NOT NULL PRIMARY KEY,
	A INT NOT NULL,
	B INT,
	K2R1 INT REFERENCES E2,

	CONSTRAINT R1
		CHECK(K2R1 IS NOT NULL OR B IS NULL) --> SE K2R1 è NULL LO è ANCHE B
);

