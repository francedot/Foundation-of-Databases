
CREATE TABLE E1(

	K1 INT NOT NULL PRIMARY KEY,
	A INT NOT NULL,
	TIPO SMALLINT NOT NULL (CHECK TIPO IN(1, 2)), --2 ISTANZA ANCHE DI E2
	
	B1 INT,
	B2 INT,
					   
	CONSTRAINT E2
		CHECK(TIPO = 1 AND B1 IS NULL AND B2 IS NULL),
		
	CONSTRAINT B_COEX
		CHECK(TIPO = 2 AND ((B1 IS NULL AND B2 IS NULL) OR (B1 IS NOT NULL AND B2 IS NOT NULL))
	--TIPO = 2 SUPERFLUO
		 
);

CREATE TABLE E3(

	K3 INT NOT NULL PRIMARY KEY,
	D INT NOT NULL,
	
	E INT NOT NULL,
	K1R INT NOT NULL REFERENCES E1

);